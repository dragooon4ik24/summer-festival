<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="festival">
    <div class="festival__wrapper">
        <section class="festival__header festival-header">
            <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/summer.png" alt="" class="festival-header__img festival-header__img--1">
            <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/festival.png" alt="" class="festival-header__img festival-header__img--2">
        </section>
        <section class="festival__main festival-main">
            <div class="festival-main__block festival-block">
                <a href="/catalog/0/search.aspx?kind=2&subject=151&search=%D0%B4%D0%B6%D0%B8%D0%BD%D1%81%D0%BE%D0%B2%D1%8B%D0%B5%20%D1%88%D0%BE%D1%80%D1%82%D1%8B&pagesize=100&sort=newly&utm_source=stylists&utm_campaign=promo_festival" target="_blank" class="festival-block__title">шорты из денима</a>
                <div class="festival-block__wrapper">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/shorts-1.jpg" alt="" class="festival-block__img">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/shorts-2.jpg" alt="" class="festival-block__img festival-block__img--moved">
                </div>
                <p class="festival-block__numbers">
                    <a target="_blank" href="/catalog/8140198/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Жилет, арт.: 8140198</a>&emsp;<a target="_blank" href="/catalog/8019624/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Шорты, арт.: 8019624</a>&emsp;<a target="_blank" href="/catalog/7631535/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Колье, арт.: 7631535</a>&emsp;<a target="_blank" href="/catalog/7889801/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Ремень, арт.: 7889801</a>&emsp;<a target="_blank" href="/catalog/8037572/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Сумка, арт.: 8037572</a>&emsp;<a target="_blank" href="/catalog/8072701/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Ботинки, арт.: 8072701</a>&emsp;<a target="_blank" href="/catalog/8099743/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Очки, арт.: 8099743</a>&emsp;<a target="_blank" href="/catalog/8122063/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Шляпа, арт.: 8122063</a>
                </p>
                <div class="festival__tape festival-tape">
                    <div class="festival-tape__wrapper festival-tape__wrapper--1">
                    </div>
                </div>
            </div>
            <div class="festival-main__block festival-block">
                <a href="/catalog/zhenshchinam/odezhda/kombinezony-polukombinezony?utm_source=stylists&utm_campaign=promo_festival" target="_blank" class="festival-block__title">ромпер</a>
                <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/romper-1.jpg" alt="" class="festival-block__main-image">
                <p class="festival-block__numbers">
                    <a target="_blank" href="/catalog/6191294/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Ромпер, арт.: 6191294</a>&emsp;<a target="_blank" href="/catalog/7867981/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Ожерелье, арт.: 7867981</a>&emsp;<a target="_blank" href="/catalog/6147087/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Сумка, арт.: 6147087</a>&emsp;<a target="_blank" href="/catalog/7631535/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Колье, арт.: 7631535</a>&emsp;<a target="_blank" href="/catalog/7686879/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Сандалии, арт.: 7686879</a>&emsp;<a target="_blank" href="/catalog/8106962/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Ободок, арт.: 8106962</a>
                </p>
                <div class="festival-block__wrapper">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/romper-2.jpg" alt="" class="festival-block__img">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/romper-3.jpg" alt="" class="festival-block__img festival-block__img--moved">
                </div>
            </div>
            <div class="festival-main__block festival-block">
                <a href="/catalog/zhenshchinam/odezhda/futbolki?color=11393254;16776960;32768;16711680;16753920;16761035;255&utm_source=stylists&utm_campaign=promo_festival" target="_blank" class="festival-block__title">яркая футболка</a>
                <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/tshirt-1.jpg" alt="" class="festival-block__main-image">
                <p class="festival-block__numbers">
                    <a target="_blank" href="/catalog/7766877/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Рубашка, арт.: 7766877</a>&emsp;<a target="_blank" href="/catalog/7371997/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Джинсы, арт.: 7371997</a>&emsp;<a target="_blank" href="/catalog/7829034/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Платье, арт.: 7829034</a>&emsp;<a target="_blank" href="/catalog/6365475/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Рюкзак, арт.: 6365475</a>&emsp;<a target="_blank" href="/catalog/7738911/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Бандана, арт.: 7738911</a>&emsp;<a target="_blank" href="/catalog/7822897/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Кеды, арт.: 7822897</a>&emsp;<a target="_blank" href="/catalog/8099744/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Очки, арт.: 8099744</a>
                </p>
                <div class="festival-block__wrapper">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/tshirt-2.jpg" alt="" class="festival-block__img">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/tshirt-3.jpg" alt="" class="festival-block__img festival-block__img--moved">
                </div>
            </div>
            <div class="festival-main__block festival-block">
                <a href="/catalog/zhenshchinam/odezhda/yubki-mini?utm_source=stylists&utm_campaign=promo_festival" target="_blank" class="festival-block__title">мини-юбка</a>
                <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/skirt-1.jpg" alt="" class="festival-block__main-image">
                <p class="festival-block__numbers">
                    <a target="_blank" href="/catalog/7756000/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Жилет, арт.: 7756000</a>&emsp;<a target="_blank" href="/catalog/7755063/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Топ, арт.: 7755063</a>&emsp;<a target="_blank" href="/catalog/7755061/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Юбка, арт.: 7755061</a>&emsp;<a target="_blank" href="/catalog/7489528/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Сумка, арт.: 7489528</a>&emsp;<a target="_blank" href="/catalog/7516384/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Очки, арт.: 7516384</a>&emsp;<a target="_blank" href="/catalog/8102398/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Босоножки, арт.: 8102398</a>&emsp;<a target="_blank" href="/catalog/8035085/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Серьги, арт.: 8035085</a>
                </p>
                <div class="festival__tape festival-tape">
                    <div class="festival-tape__wrapper festival-tape__wrapper--2">
                    </div>
                </div>
            </div>
            <div class="festival-main__block festival-block">
                <a href="/catalog/0/search.aspx?subject=1&search=%D1%86%D0%B2%D0%B5%D1%82%D0%BE%D1%87%D0%BD%D1%8B%D0%B9%20%D0%BF%D1%80%D0%B8%D0%BD%D1%82&pagesize=100&sort=popular&utm_source=stylists&utm_campaign=promo_festival" target="_blank" class="festival-block__title">цветочный принт</a>
                <div class="festival-block__wrapper">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/flower-1.jpg" alt="" class="festival-block__img">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/flower-2.jpg" alt="" class="festival-block__img festival-block__img--moved">
                </div>
                <p class="festival-block__numbers">
                    <a target="_blank" href="/catalog/7661564/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Платье, арт.: 7661564</a>&emsp;<a target="_blank" href="/catalog/5335232/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Венок, арт.: 5335232</a>&emsp;<a target="_blank" href="/catalog/7372701/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Сумка, арт.: 7372701</a>&emsp;<a target="_blank" href="/catalog/6897519/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Ботинки, арт.: 6897519</a>
                </p>
                <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/flower-3.jpg" alt="" class="festival-block__main-image">
            </div>
            <div class="festival-main__block festival-block">
                <a href="/catalog/zhenshchinam/odezhda/kostyumy/s-shortami?season=46&pagesize=100&sort=popular&utm_source=stylists&utm_campaign=promo_festival" target="_blank" class="festival-block__title">летний костюм</a>
                <div class="festival-block__wrapper">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/summer-suit-1.jpg" alt="" class="festival-block__img">
                    <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/summer-suit-2.jpg" alt="" class="festival-block__img festival-block__img--moved">
                </div>
                <p class="festival-block__numbers">
                    <a target="_blank" href="/catalog/8109937/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Жакет, арт.: 8109937</a>&emsp;<a target="_blank" href="/catalog/8109936/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Брюки, арт.: 8109936</a>&emsp;<a target="_blank" href="/catalog/7748051/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Лиф, арт.: 7748051</a>&emsp;<a target="_blank" href="/catalog/7278495/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Сабо, арт.: 7278495</a>&emsp;<a target="_blank" href="/catalog/7349769/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Сумка, арт.: 7349769</a>&emsp;<a target="_blank" href="/catalog/7725514/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Повязка, арт.: 7725514</a>&emsp;<a target="_blank" href="/catalog/8008020/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Очки, арт.: 8008020</a>&emsp;<a target="_blank" href="/catalog/8145526/detail.aspx?targetUrl=SP&utm_source=stylists&utm_campaign=promo_festival" class="festival-block__link">Серьги, арт.: 8145526</a>
                </p>
                <img src="https://images.wbstatic.net/marketing/promo/promo__summer-festival/summer-suit-3.jpg" alt="" class="festival-block__main-image">
            </div>
        </section>
    </div>
</div>
<script>
    'use strict';

    const viewportHeight = screen.availHeight;
    let scrollY;
    let scroll;
    let festivalWrapper = document.querySelector('.festival__wrapper');
    let festivalWrapperDistanceToTop;
    let summerImg = document.querySelector('.festival-header__img--1');
    let festivalImg = document.querySelector('.festival-header__img--2');

    function changeValueOnOffsetSize1(element, offset, minBoard, maxBoard, changedValue, direction) {
        let coordX;

        switch (direction) {
            case "toRight" :
                coordX = element.offsetLeft + offset;
                break;
            case "toLeft":
                coordX = element.offsetLeft - offset;
                break;
            case "toTop":
                coordX = element.offsetTop - offset;
                break;
            case "toBottom":
                coordX = element.offsetTop + offset;
                break;
        }
        if(coordX > minBoard && coordX < maxBoard) {
            element.style[changedValue] = coordX + 'px';
        }
    }

    function moveElement1(element, speedScroll, scroll, newScroll, leftBoard, rightBoard, direction) {
        let scrollOffset = newScroll * speedScroll - scroll;

        if (scrollOffset >= 0) {
            changeValueOnOffsetSize1(element, scrollOffset, leftBoard, rightBoard, 'left', direction);
        }
        else if(scrollOffset < 0){
            changeValueOnOffsetSize1(element, scrollOffset, leftBoard, rightBoard, 'left', direction);
        }
    }
    document.addEventListener('scroll', function () {
        scrollY = window.pageYOffset;
        festivalWrapperDistanceToTop = festivalWrapper.getBoundingClientRect().top;

        if(festivalWrapperDistanceToTop === 0) {
            moveElement1(summerImg, 0.8, scroll, scrollY, -590, 437, 'toRight');
            moveElement1(festivalImg, 0.8, scroll, scrollY, 432, 1450, 'toLeft');
        }
        scroll = scrollY * 0.8;
    });

    function changeValueOnOffsetSize(element, offset, minBoard, maxBoard, changedValue, direction) {
        let coordX;

        switch (direction) {
            case "toRight" :
                coordX = element.offsetLeft + offset;
                break;
            case "toLeft":
                coordX = element.offsetLeft - offset;
                break;
            case "toTop":
                coordX = element.offsetTop - offset;
                break;
            case "toBottom":
                coordX = element.offsetTop + offset;
                break;
        }
        if(coordX > minBoard && coordX < maxBoard) {
            element.style[changedValue] = coordX + 'px';
        }
    }

    function moveElement(element, parentBlock, speedScroll, scroll, newScroll, percentAppearance, percentDisappearance, leftBoard, rightBoard, direction) {
        let scrollOffset = newScroll * speedScroll - scroll;

        let parentBlockTop = parentBlock.getBoundingClientRect().top;
        let parentBlockBottom = parentBlock.getBoundingClientRect().bottom;

        if ((parentBlockTop < (viewportHeight * percentAppearance)) && scrollOffset >= 0) {
            changeValueOnOffsetSize(element, scrollOffset, leftBoard, rightBoard, 'left', direction);
        }
        else if((parentBlockBottom > (viewportHeight * percentDisappearance)) && scrollOffset < 0){
            changeValueOnOffsetSize(element, scrollOffset, leftBoard, rightBoard, 'left', direction);
        }
    }

    (function f() {
        function Tape(el) {
            let scrollY;
            let scroll;
            let parent = el.parentElement;
            document.addEventListener('scroll', function () {
                scrollY = window.pageYOffset;
                moveElement(el, parent, 0.8, scroll, scrollY, 0.95, 0.05, -5000, 0, 'toLeft');
                scroll = scrollY * 0.8;
            });
        };
        let tapeList = document.querySelectorAll('.festival-tape__wrapper');
        Array.prototype.forEach.call(tapeList, (item)=> {
            let tape = new Tape(item);
        });
    })();
    (function f() {
        function MovedImg(el) {
            let scrollY;
            let scroll;
            let parent = el.parentElement;
            document.addEventListener('scroll', function () {
                scrollY = window.pageYOffset;
                moveElement(el, parent, 0.9, scroll, scrollY, 0.85, 1.3, 0, 720, 'toRight');
                scroll = scrollY * 0.9;
            });
        };
        let imgList = document.querySelectorAll('.festival-block__img--moved');
        Array.prototype.forEach.call(imgList, (item)=> {
            let img = new MovedImg(item);
        });
    })();

</script>
</body>
</html>
